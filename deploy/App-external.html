<!DOCTYPE html>
<html>
<head>
    <title>LEAD-STEER-EXECUTE Metrics</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",launch:function(){var PROJECT_RADIAN="37192747640",PROJECT_BUSINESS="37637012809",PROJECT_SPRINT_TEAMS="37213611687",PROJECT_SUPPORTING_TEAMS="37192947515",PROJECT_EXECUTION="37192748545",PROJECT_AWS_TEAMS="35625370074",PROJECT_ECMLDR_TEAMS="35625373948",PROJECT_PAS_TEAMS="34799452294",PROJECT_SFDC_TEAMS="35625125755",context=this.getContext();this._addLine(this,"Extract of "+context.getWorkspace().Name+" at "+(new Date).toLocaleString()),this._dumpTimeContext(this,context),this._countFeatures(this,this._filterByState("Defined"),PROJECT_BUSINESS),this._addLine(this,"done")},_addLine:function(container,value){container.add({xtype:"component",html:value})},_dumpTimeContext:function(container,context){var timeboxScope=context.getTimeboxScope(),type=timeboxScope&&timeboxScope.getType(),record=timeboxScope&&timeboxScope.getRecord();timeboxScope?this._addLine(container,"Timebox scope: "+type+", value: "+(record?record.get("Name"):"Unscheduled")):this._addLine("No timebox scope")},_addStoryGrid:function(container,context){container.add({xtype:"rallygrid",itemId:"storyGrid",columnCfgs:["FormattedID","Name","Project"],context:context,storeConfig:{model:"userstory",filters:[{property:"LastUpdateDate",operator:">=",value:"today-7"}],context:{project:context.getProject(),projectScopeDown:!0}}})},_filterByID:function(initiative){return{property:"FormattedID",operator:"=",value:initiative}},_filterByState:function(value){var filters=Ext.create("Rally.data.QueryFilter",{property:"State.Name",operator:"=",value:value});return filters},_countFeatures:function(container,filters,project){Ext.create("Rally.data.wsapi.Store",{model:"PortfolioItem/Feature",pagesize:1,autoLoad:!0,context:{project:"/project/"+project,projectScopeDown:!0,projectScopeUp:!1},filters:filters,listeners:{load:function(store,records){container._addLine(container,"Business Defined features: "+store.getTotalCount())}}})},_addFeatureGrid:function(container,ID,filters,hideHeaders){this._addPortfolioGrid(container,ID,filters,hideHeaders,["FormattedID","Name","State","c_BusinessPreWorkState","c_FeatureQACoordinator","c_UATState","Project"],"Feature",!0)},_addInitiativeGrid:function(container,ID,filters,hideHeaders){this._addPortfolioGrid(container,ID,filters,hideHeaders,["FormattedID","Name","PercentDoneByStoryPlanEstimate","PercentDoneByStoryCount","AcceptedLeafStoryCount","LeafStoryCount","PlannedEndDate","PreliminaryEstimate","RefinedEstimate","UnEstimatedLeafStoryCount"],"Initiative",!1)},_addPortfolioGrid:function(container,ID,filters,hideHeaders,columns,model,paging){container.add({xtype:"rallygrid",itemId:"portfolioGrid"+ID,showPagingToolbar:paging,hideHeaders:hideHeaders,viewConfig:{shrinkWrap:3},columnCfgs:columns,storeConfig:{model:"PortfolioItem/"+model,autoload:!0,context:{project:"/project/37637012809",projectScopeDown:!0,projectScopeUp:!1},filters:filters}})}});

            Rally.launchApp('CustomApp', {
                name:"LEAD-STEER-EXECUTE Metrics",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
